<div class="card" style="max-width: 500px; margin: 2rem auto;">
  <h2 style="margin-top: 0; text-align: center; font-weight: 600; margin-bottom: 2rem;">Téléchargement</h2>

  <div *ngIf="loading" style="text-align: center;">Chargement des informations...</div>

  <div data-cy="download-error" *ngIf="error" class="error" style="color: #ef4444; text-align: center; background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
    {{ error }}
  </div>

  <div *ngIf="fileInfo && !loading">
    <div style="background: rgba(0,0,0,0.03); padding: 1.5rem; border-radius: 15px; margin-bottom: 1.5rem;">
      <div style="font-size: 1.25rem; font-weight: 700; color: #1e1b4b; margin-bottom: 1rem; word-break: break-all;">{{ fileInfo.filename }}</div>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 0.9rem;">
        <div>
          <span style="color: #64748b; display: block;">Taille</span>
          <strong>{{ formatSize(fileInfo.size) }}</strong>
        </div>
        <div>
          <span style="color: #64748b; display: block;">Expire le</span>
          <strong>{{ fileInfo.expiresAt | date:'short' }}</strong>
        </div>
      </div>
      
      <div *ngIf="fileInfo.tags && fileInfo.tags.length > 0" style="margin-top: 1rem;">
        <span style="color: #64748b; display: block; font-size: 0.9rem; margin-bottom: 0.5rem;">Tags</span>
        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
          <span *ngFor="let tag of fileInfo.tags" style="background: #0f172a; color: white; padding: 2px 10px; border-radius: 20px; font-size: 0.75rem;">{{ tag }}</span>
        </div>
      </div>
    </div>

    <div *ngIf="fileInfo.password" style="margin-bottom: 1.5rem;">
      <label>
        Mot de passe requis
        <input data-cy="download-password" type="password" [(ngModel)]="password" placeholder="Entrez le mot de passe">
      </label>
    </div>

    <button data-cy="download-submit" (click)="onDownload()" class="btn-primary">Télécharger le fichier</button>
  </div>
</div>
